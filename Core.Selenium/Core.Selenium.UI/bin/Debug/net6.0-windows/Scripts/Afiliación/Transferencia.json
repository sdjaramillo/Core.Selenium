{
  "Nombre": "TransferenciaBase",
  "Comandos": [
    {
      "Id": "LOGIN",
      "Orden": 0,
      "Command": "open",
      "Comment": "Página login",
      "Target": "https://bgrdigital-test.bgr.com.ec",
      "Value": "",
      "Tipo": "comando",
      "InicioSesion": true,
      "FinSesion": false,
      "Iterar": false,
      "ComandosVerdadero": [],
      "ComandosFalso": []
    },
    {
      "Id": "LOGIN",
      "Orden": 1,
      "Command": "type",
      "Comment": "Ingresar usuario",
      "Target": "id=NombreUsuario",
      "Value": "{usuario}",
      "Tipo": "comando",
      "InicioSesion": true,
      "FinSesion": false,
      "Iterar": false,
      "ComandosVerdadero": [],
      "ComandosFalso": []
    },
    {
      "Id": "LOGIN",
      "Orden": 2,
      "Command": "type",
      "Comment": "Ingresar Contraseña",
      "Target": "id=Clave",
      "Value": "{clave}",
      "Tipo": "comando",
      "InicioSesion": true,
      "FinSesion": false,
      "Iterar": false,
      "ComandosVerdadero": [],
      "ComandosFalso": []
    },
    {
      "Id": "LOGIN",
      "Orden": 3,
      "Command": "click",
      "Comment": "Boton Ingresar a Banca Digital",
      "Target": "id=IdBotonIngresarBanca",
      "Value": "",
      "Tipo": "comando",
      "InicioSesion": true,
      "FinSesion": false,
      "Iterar": false,
      "ComandosVerdadero": [],
      "ComandosFalso": []
    },
    {
      "Id": "TRANSFERENCAS",
      "Orden": 4,
      "Command": "click",
      "Comment": "Click opción menu transferencias",
      "Target": "id=menu-transferencias",
      "Value": "",
      "Tipo": "comando",
      "InicioSesion": false,
      "FinSesion": false,
      "Iterar": true,
      "ComandosVerdadero": [],
      "ComandosFalso": []
    },
    {
      "Id": "TRANSFERENCIAS",
      "Orden": 5,
      "Command": "textispresent",
      "Comment": "Verificar si existe mensaje de saludo",
      "Target": "¡Hola",
      "Value": "",
      "Tipo": "condicion",
      "InicioSesion": false,
      "FinSesion": false,
      "Iterar": true,
      "ComandosVerdadero": [],
      "ComandosFalso": []
    },
    {
      "Id": "NUEVA-TRANSFERENCIA",
      "Orden": 6,
      "Command": "click",
      "Comment": "Boton nueva trasferencia",
      "Target": "xpath=//button[normalize-space()='Nueva Transferencia']",
      "Value": "",
      "Tipo": "comando",
      "InicioSesion": false,
      "FinSesion": false,
      "Iterar": true,
      "ComandosVerdadero": [],
      "ComandosFalso": []
    },
    {
      "Id": "NUEVA-TRANSFERENCIA",
      "Orden": 7,
      "Command": "wait",
      "Comment": "Espera",
      "Target": "2",
      "Value": "",
      "Tipo": "comando",
      "InicioSesion": false,
      "FinSesion": false,
      "Iterar": true,
      "ComandosVerdadero": [],
      "ComandosFalso": []
    },
    {
      "Id": "BENEFICIARIO",
      "Orden": 8,
      "Command": "type",
      "Comment": "Buscar cuenta o beneficiario",
      "Target": "id=txtBuscarBeneficiario",
      "Value": "{numeroCuenta}",
      "Tipo": "comando",
      "InicioSesion": false,
      "FinSesion": false,
      "Iterar": true,
      "ComandosVerdadero": [],
      "ComandosFalso": []
    },
    {
      "Id": "TRANSFERENCIA",
      "Orden": 9,
      "Command": "click",
      "Comment": "Selecciona cuenta encontrada",
      "Target": "name=numCuentaBeneficiario",
      "Value": "",
      "Tipo": "comando",
      "InicioSesion": false,
      "FinSesion": false,
      "Iterar": true,
      "ComandosVerdadero": [],
      "ComandosFalso": []
    },
    {
      "Id": "BENEFICIARIO",
      "Orden": 10,
      "Command": "js",
      "Comment": "Buscar cuenta benefciario en grid",
      "Target": "var paginas = document.getElementById('tblBeneficiario_paginate').getElementsByClassName('page-link');for (let pag of paginas) {pag.click();let encontrado = false;var tabla = document.getElementById('tblBeneficiario');var filas = tabla.getElementsByTagName('tbody')[0].getElementsByTagName('tr');for (let f of filas) {var celdas = f.getElementsByTagName('td');var celdaCuenta = celdas[3].innerText;if (celdaCuenta.includes('{numeroCuenta}')) {console.log(celdas[0].childNodes[1].click());encontrado = true;break;}}if (encontrado) {break;}document.getElementById('tblBeneficiario_next').click();}",
      "Value": "",
      "Tipo": "script",
      "InicioSesion": false,
      "FinSesion": false,
      "Iterar": false,
      "ComandosVerdadero": [],
      "ComandosFalso": []
    },
    {
      "Id": "BENEFICIARIO",
      "Orden": 11,
      "Command": "click",
      "Comment": "Boton continuar",
      "Target": "id=btnBeneficiario",
      "Value": "",
      "Tipo": "comando",
      "InicioSesion": false,
      "FinSesion": false,
      "Iterar": true,
      "ComandosVerdadero": [],
      "ComandosFalso": []
    },
    {
      "Id": "MONTO-CONCEPTO",
      "Orden": 12,
      "Command": "type",
      "Comment": "Campo monto",
      "Target": "id=ValorTransaccion",
      "Value": "{monto}",
      "Tipo": "comando",
      "InicioSesion": false,
      "FinSesion": false,
      "Iterar": true,
      "ComandosVerdadero": [],
      "ComandosFalso": []
    },
    {
      "Id": "MONTO-CONCEPTO",
      "Orden": 13,
      "Command": "type",
      "Comment": "Campo concepto",
      "Target": "id=ConceptoTransferencia",
      "Value": "{concepto}",
      "Tipo": "comando",
      "InicioSesion": false,
      "FinSesion": false,
      "Iterar": true,
      "ComandosVerdadero": [],
      "ComandosFalso": []
    },
    {
      "Id": "MONTO",
      "Orden": 14,
      "Command": "click",
      "Comment": "Boton continuar",
      "Target": "id=btnMonto",
      "Value": "",
      "Tipo": "comando",
      "InicioSesion": false,
      "FinSesion": false,
      "Iterar": true,
      "ComandosVerdadero": [],
      "ComandosFalso": []
    },
    {
      "Id": "CUENTA-DEBITAR",
      "Orden": 15,
      "Command": "click",
      "Comment": "Boton expandir cuentas",
      "Target": "xpath=//button[contains(.,'Selecciona una de tus cuentas')]",
      "Value": "",
      "Tipo": "comando",
      "InicioSesion": false,
      "FinSesion": false,
      "Iterar": true,
      "ComandosVerdadero": [],
      "ComandosFalso": []
    },
    {
      "Id": "CUENTA-DEBITAR",
      "Orden": 16,
      "Command": "select",
      "Comment": "Boton continuar",
      "Target": "xpath=//*[@id=\"cabeceraSeleccionarCuenta\"]/button/",
      "Value": "label={cuentaOrigen}",
      "Tipo": "comando",
      "InicioSesion": false,
      "FinSesion": false,
      "Iterar": false,
      "ComandosVerdadero": [],
      "ComandosFalso": []
    },
    {
      "Id": "NUEVA-TRANSFERENCIA",
      "Orden": 17,
      "Command": "wait",
      "Comment": "Espera",
      "Target": "1",
      "Value": "",
      "Tipo": "comando",
      "InicioSesion": false,
      "FinSesion": false,
      "Iterar": true,
      "ComandosVerdadero": [],
      "ComandosFalso": []
    },
    {
      "Id": "BUSCAR-CUENTA-DEBITAR",
      "Orden": 18,
      "Command": "js",
      "Comment": "Boton continuar cuenta debitar",
      "Target": "var filaListaCuentas = document.getElementsByClassName('row mt-3 rowCuentas align-items-center');var cantidadListaCuentas = filaListaCuentas.length;for (let item of filaListaCuentas) {var input = item.getElementsByTagName('input')[0];var innerTextSplit = item.innerText.split('\\n');var numParametros = innerTextSplit.length;var tipoCuenta = innerTextSplit[0];var numeroCuenta = innerTextSplit[1];var fondoInsuficiente = (numParametros.length==4)?innerTextSplit[2]:'';var valorCuenta = (numParametros.length==4)?innerTextSplit[4]:innerTextSplit[3];        if(numeroCuenta.includes(1900)){input.click();  break;}    }",
      "Value": "",
      "Tipo": "script",
      "InicioSesion": false,
      "FinSesion": false,
      "Iterar": true,
      "ComandosVerdadero": [],
      "ComandosFalso": []
    },
    {
      "Id": "BOTON-CONTINUAR-CUENTA",
      "Orden": 19,
      "Command": "click",
      "Comment": "Boton confirmar cuenta origuen",
      "Target": "id=btnCuenta",
      "Value": "",
      "Tipo": "comando",
      "InicioSesion": false,
      "FinSesion": false,
      "Iterar": true,
      "ComandosVerdadero": [],
      "ComandosFalso": []
    },
    {
      "Id": "BOTON-CONTINUAR-CUENTA",
      "Orden": 20,
      "Command": "click",
      "Comment": "Boton Continuar",
      "Target": "xpath=//*[@id=\"ContinuarTransferencia\"]/div[2]/button",
      "Value": "",
      "Tipo": "comando",
      "InicioSesion": false,
      "FinSesion": false,
      "Iterar": false,
      "ComandosVerdadero": [],
      "ComandosFalso": []
    },
    {
      "Id": "INGRESO-OTP",
      "Orden": 21,
      "Command": "type",
      "Comment": "Boton Continuar",
      "Target": "id=Pin1",
      "Value": "{pin1}",
      "Tipo": "comando",
      "InicioSesion": false,
      "FinSesion": false,
      "Iterar": false,
      "ComandosVerdadero": [],
      "ComandosFalso": []
    },
    {
      "Id": "INGRESO-OTP-2",
      "Orden": 22,
      "Command": "type",
      "Comment": "Boton Continuar",
      "Target": "id=Pin2",
      "Value": "{pin2}",
      "Tipo": "comando",
      "InicioSesion": false,
      "FinSesion": false,
      "Iterar": false,
      "ComandosVerdadero": [],
      "ComandosFalso": []
    },
    {
      "Id": "INGRESO-OTP-3",
      "Orden": 23,
      "Command": "type",
      "Comment": "Pin 3",
      "Target": "id=Pin3",
      "Value": "{pin3}",
      "Tipo": "comando",
      "InicioSesion": false,
      "FinSesion": false,
      "Iterar": false,
      "ComandosVerdadero": [],
      "ComandosFalso": []
    },
    {
      "Id": "INGRESO-OTP-4",
      "Orden": 24,
      "Command": "type",
      "Comment": "Pin 4",
      "Target": "id=Pin4",
      "Value": "{pin4}",
      "Tipo": "comando",
      "InicioSesion": false,
      "FinSesion": false,
      "Iterar": false,
      "ComandosVerdadero": [],
      "ComandosFalso": []
    },
    {
      "Id": "INGRESO-OTP-5",
      "Orden": 25,
      "Command": "type",
      "Comment": "Pin 5",
      "Target": "id=Pin5",
      "Value": "{pin5}",
      "Tipo": "comando",
      "InicioSesion": false,
      "FinSesion": false,
      "Iterar": false,
      "ComandosVerdadero": [],
      "ComandosFalso": []
    },
    {
      "Id": "INGRESO-OTP-6",
      "Orden": 26,
      "Command": "type",
      "Comment": "Boton Continuar",
      "Target": "id=Pin6",
      "Value": "{pin6}",
      "Tipo": "comando",
      "InicioSesion": false,
      "FinSesion": false,
      "Iterar": false,
      "ComandosVerdadero": [],
      "ComandosFalso": []
    },
    {
      "Id": "VALIDAR-OTP",
      "Orden": 27,
      "Command": "click",
      "Comment": "Boton Continuar",
      "Target": "id=btnContinuar",
      "Value": "",
      "Tipo": "comando",
      "InicioSesion": false,
      "FinSesion": false,
      "Iterar": false,
      "ComandosVerdadero": [],
      "ComandosFalso": []
    },
    {
      "Id": "TRANSFERENCIAS",
      "Orden": 28,
      "Command": "textispresent",
      "Comment": "Validar transferecia exitosa",
      "Target": "¡Transferencia exitosa!",
      "Value": "10",
      "Tipo": "condicion",
      "InicioSesion": false,
      "FinSesion": false,
      "Iterar": false,
      "ComandosVerdadero": [
        {
          "Id": "Condicion-Transferencia-Exitosa",
          "Orden": 1,
          "Command": "terminarsinerror",
          "Comment": "Condición transferencia exitosa",
          "Target": "Transferencia exitosa",
          "Value": "",
          "Tipo": "comando",
          "InicioSesion": false,
          "FinSesion": false,
          "Iterar": true,
          "ComandosVerdadero": [],
          "ComandosFalso": []
        }
      ],
      "ComandosFalso": [
        {
          "Id": "Condicion-Transferencia-Exitosa",
          "Orden": 1,
          "Command": "terminarconerror",
          "Comment": "Condición transferencia exitosa",
          "Target": "Transferencia fallida",
          "Value": "",
          "Tipo": "comando",
          "InicioSesion": false,
          "FinSesion": false,
          "Iterar": true,
          "ComandosVerdadero": [],
          "ComandosFalso": []
        }
      ]
    }
  ],
  "ScriptData": {
    "url": "",
    "driver": "chrome",
    "dataTest": [
      {
        "nombrePrueba": "TransferenciaBase",
        "suiteVars": {
          "usuario": "ajaramillo1",
          "clave": "Administrador.42"
        },
        "testsVars": [
          {
            "numeroCuenta": "4456",
            "monto": "20.00",
            "concepto": "Transferencia directa",
            "cuentaOrigen": "2100",
            "pin1": "1",
            "pin2": "2",
            "pin3": "3",
            "pin4": "4",
            "pin5": "5",
            "pin6": "6"
          }
        ]
      }
    ]
  }
}